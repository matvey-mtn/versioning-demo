/* parent project */
rootProject.name = 'versioning-demo'

include 'service-foo', 'service-bar'

def includeInfra = true

if (isNotJenkinsBuild() && includeInfra) {
    includeBuild('./infrastructure') {
        dependencySubstitution {
            substitute module("io.logz.example:no-ops") using project(":no-ops") because('stub to disable default substitution')
            substitute module("io.logz.example.infrastructure:string-utils") using project(':string-utils')
        }
    }
}

private static boolean isNotJenkinsBuild() {
    def jenkinsHome = System.getenv('JENKINS_HOME')
    return jenkinsHome == null || jenkinsHome.isEmpty()
}
